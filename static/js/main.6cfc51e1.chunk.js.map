{"version":3,"sources":["ImageGallery/ImageGallery.module.css","Loader/Loader.module.css","ImageError/ImageError.module.css","ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css","Modal/Modal.module.css","App.module.css","Searchbar/Searchbar.jsx","services/Service-api.js","ImageGallery/ImageGalleryItem/ImageGalleryItem.jsx","Loader/Loader.jsx","ImageError/jW.gif","ImageError/ImageError.jsx","Modal/Modal.jsx","ImageGallery/ImageGallery.jsx","App.js","index.js","Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","searchQuery","currentPage","onQueryChange","e","setState","currentTarget","value","onSubmit","preventDefault","trim","props","toLowerCase","toast","className","styles","this","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","fetchImage","query","currenPage","axios","get","then","response","propTypes","PropTypes","string","ImageGalleryItem","map","image","src","webformatURL","alt","largeImageURL","ImageGalleryItemImage","id","Loader","LoaderContainer","hourglass","ImageError","error","message","queryName","sadImage","Modal","onKeyDown","code","onClose","onBackdropClick","event","target","window","addEventListener","removeEventListener","Overlay","onClick","children","Status","ImageGallery","status","showModal","fetchImages","API","images","data","hits","length","prevState","scrollTo","top","document","documentElement","scrollHeight","behavior","onGalleryItemClick","catch","nodeName","toggleModal","componentDidUpdate","prevProps","setTimeout","App","onFormSubmit","autoClose","position","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6cfc51e1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1mv58\",\"image\":\"ImageGallery_image__1AgXG\",\"Loader\":\"ImageGallery_Loader__o_viL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LoaderContainer\":\"Loader_LoaderContainer__4S_SO\",\"searchQuery\":\"Loader_searchQuery__1uHID\",\"hourglass\":\"Loader_hourglass__26UcI\",\"flip\":\"Loader_flip__32YyY\",\"fill\":\"Loader_fill__2z82R\",\"glare\":\"Loader_glare__1wFFI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"ImageError_error__UiY89\",\"queryName\":\"ImageError_queryName__1s2Dc\",\"ImageError\":\"ImageError_ImageError__HH8hI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1XfAl\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3J18y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__HHKMb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__H34LH\"};","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport styles from './Searchbar.module.css';\r\nclass Searchbar extends Component {\r\n  state = { searchQuery: '', currentPage: 1 };\r\n\r\n  onQueryChange = e => {\r\n    this.setState({ searchQuery: e.currentTarget.value });\r\n  };\r\n  onSubmit = e => {\r\n    e.preventDefault();\r\n    if (this.state.searchQuery.trim() === '') {\r\n      toast('Type something to find.');\r\n      return;\r\n    }\r\n    this.props.onSubmit(\r\n      this.state.searchQuery.toLowerCase(),\r\n      this.state.currentPage,\r\n    );\r\n    this.setState({ searchQuery: '', currentPage: 1 });\r\n  };\r\n  render() {\r\n    return (\r\n      <header className={styles.Searchbar}>\r\n        <form onSubmit={this.onSubmit} className={styles.SearchForm}>\r\n          <button type=\"submit\" className={styles.SearchFormButton}>\r\n            <span className={styles.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={styles.SearchFormInput}\r\n            value={this.state.searchQuery}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.onQueryChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\nexport default Searchbar;\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func,\r\n};\r\n","import axios from 'axios';\r\nimport PropTypes from 'prop-types';\r\n\r\n//18968535-a98ecca7bd1b0403c78b07ef3\r\nfunction fetchImage(query, currenPage) {\r\n  return axios\r\n    .get(\r\n      `https://pixabay.com/api/?key=18968535-a98ecca7bd1b0403c78b07ef3&q=${query}&page=${currenPage}&image_type=photo&orientation=horizontal&per_page=12`,\r\n    )\r\n    .then(response => response);\r\n}\r\nexport default fetchImage;\r\nfetchImage.propTypes = {\r\n  query: PropTypes.string,\r\n  searchQuery: PropTypes.string,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport styles from './ImageGalleryItem.module.css';\r\nconst ImageGalleryItem = ({ query }) => {\r\n  const imageData = query;\r\n  return imageData.map(image => (\r\n    <li key={image.id} className={styles.ImageGalleryItem}>\r\n      <img\r\n        src={image.webformatURL}\r\n        alt={image.largeImageURL}\r\n        className={styles.ImageGalleryItemImage}\r\n      />\r\n    </li>\r\n  ));\r\n};\r\nexport default ImageGalleryItem;\r\nImageGalleryItem.propTypes = {\r\n  query: PropTypes.arrayOf(PropTypes.object),\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport styles from './Loader.module.css';\r\nexport default function Loader({ searchQuery }) {\r\n  return (\r\n    <div className={styles.LoaderContainer}>\r\n      <p>\r\n        Подождите, идет загрузка изображений по запросу{' '}\r\n        <span className={styles.searchQuery}>{searchQuery}</span>\r\n      </p>\r\n      <div className={styles.hourglass}></div>\r\n    </div>\r\n  );\r\n}\r\nLoader.propTypes = {\r\n  searchQuery: PropTypes.string,\r\n};\r\n","export default __webpack_public_path__ + \"static/media/jW.1da8fd95.gif\";","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport styles from './ImageError.module.css';\r\nimport sadImage from './jW.gif';\r\nexport default function ImageError({ error, searchQuery }) {\r\n  return error ? (\r\n    <div>{error.message}</div>\r\n  ) : (\r\n    <div className={styles.error}>\r\n      Нет картинок по запросу{' '}\r\n      <span className={styles.queryName}>{searchQuery}</span>\r\n      <img src={sadImage} alt=\"\" className={styles.ImageError} />\r\n    </div>\r\n  );\r\n}\r\nImageError.propTypes = {\r\n  error: PropTypes.object,\r\n  searchQuery: PropTypes.string,\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport styles from './Modal.module.css';\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.onKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.onKeyDown);\r\n  }\r\n\r\n  onKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  onBackdropClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className={styles.Overlay} onClick={this.onBackdropClick}>\r\n        <div className={styles.Modal}>{this.props.children}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nModal.propTypes = {\r\n  onClose: PropTypes.func,\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport styles from './ImageGallery.module.css';\r\nimport API from '../services/Service-api';\r\nimport ImageGalleryItem from './ImageGalleryItem';\r\nimport Loader from '../Loader';\r\nimport ImageError from '../ImageError';\r\nimport Modal from '../Modal';\r\n\r\nconst Status = {\r\n  IDLE: 'idle',\r\n  PENDING: 'pending',\r\n  RESOLVED: 'resolved',\r\n  REJECTED: 'rejected',\r\n};\r\nclass ImageGallery extends Component {\r\n  state = {\r\n    query: [],\r\n    error: null,\r\n    status: Status.IDLE,\r\n    currentPage: 1,\r\n    showModal: false,\r\n    largeImageURL: '',\r\n  };\r\n\r\n  fetchImages = () => {\r\n    API(this.props.searchQuery, this.state.currentPage)\r\n      .then(query => {\r\n        const images = query.data.hits;\r\n        if (!images.length) {\r\n          this.setState({ query, status: Status.REJECTED });\r\n        } else {\r\n          this.setState(prevState => ({\r\n            query: [...prevState.query, ...images],\r\n            status: Status.RESOLVED,\r\n            currentPage: prevState.currentPage + 1,\r\n          }));\r\n          window.scrollTo({\r\n            top: document.documentElement.scrollHeight,\r\n            behavior: 'smooth',\r\n          });\r\n          window.addEventListener('click', this.onGalleryItemClick);\r\n        }\r\n      })\r\n      .catch(error => this.setState({ error, status: Status.REJECTED }));\r\n  };\r\n  onGalleryItemClick = event => {\r\n    if (event.target.nodeName !== 'IMG') {\r\n      return;\r\n    }\r\n    this.setState({ largeImageURL: event.target.alt });\r\n    this.toggleModal();\r\n  };\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => ({\r\n      showModal: !showModal,\r\n    }));\r\n  };\r\n  componentDidUpdate = (prevProps, prevState) => {\r\n    const prevQuery = prevProps.searchQuery;\r\n    const nextQuery = this.props.searchQuery;\r\n    if (prevQuery !== nextQuery) {\r\n      this.setState({\r\n        status: Status.PENDING,\r\n        query: [],\r\n        currentPage: this.props.currentPage,\r\n      });\r\n      setTimeout(() => {\r\n        this.fetchImages();\r\n      }, 3000);\r\n    }\r\n  };\r\n  componentWillUnmount() {\r\n    window.removeEventListener('click', this.onGalleryItemClick);\r\n  }\r\n  render() {\r\n    const { query, error, status } = this.state;\r\n    const { searchQuery } = this.props;\r\n\r\n    if (status === 'idle') {\r\n      return <div>Введите текст запроса.</div>;\r\n    }\r\n\r\n    if (status === 'pending') {\r\n      return (\r\n        <div className={styles.Loader}>\r\n          <Loader searchQuery={searchQuery} />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (status === 'rejected') {\r\n      return <ImageError error={error} searchQuery={searchQuery} />;\r\n    }\r\n\r\n    if (status === 'resolved') {\r\n      return (\r\n        <ul className={styles.ImageGallery}>\r\n          <ImageGalleryItem query={query} />\r\n          {this.state.showModal && (\r\n            <Modal onClose={this.toggleModal}>\r\n              <img\r\n                src={this.state.largeImageURL}\r\n                alt=\"\"\r\n                className={styles.image}\r\n              />\r\n            </Modal>\r\n          )}\r\n          <button type=\"button\" onClick={this.fetchImages}>\r\n            Загрузить еще\r\n          </button>\r\n        </ul>\r\n      );\r\n    }\r\n  }\r\n}\r\nexport default ImageGallery;\r\nImageGallery.propTypes = {\r\n  currentPage: PropTypes.number,\r\n  searchQuery: PropTypes.string,\r\n};\r\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ToastContainer } from 'react-toastify';\n\nimport styles from './App.module.css';\nimport Searchbar from './Searchbar';\nimport ImageGallery from './ImageGallery';\nclass App extends Component {\n  state = {\n    searchQuery: '',\n    currentPage: 1,\n  };\n  onFormSubmit = searchQuery => {\n    this.setState({ searchQuery, currentPage: 1 });\n  };\n\n  render() {\n    return (\n      <div className={styles.App}>\n        <Searchbar onSubmit={this.onFormSubmit} />\n        <ImageGallery\n          searchQuery={this.state.searchQuery}\n          currentPage={this.state.currentPage}\n        />\n\n        <ToastContainer autoClose={3000} position=\"top-center\" />\n      </div>\n    );\n  }\n}\n\nexport default App;\nApp.propTypes = {\n  searchQuery: PropTypes.string,\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1dkT6\",\"ImageGallery\":\"Searchbar_ImageGallery__1rENI\",\"ImageGalleryItem\":\"Searchbar_ImageGalleryItem__20RDe\",\"ImageGalleryItem_Image\":\"Searchbar_ImageGalleryItem_Image__10OIo\"};"],"sourceRoot":""}